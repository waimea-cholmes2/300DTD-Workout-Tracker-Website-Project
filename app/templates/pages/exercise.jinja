{#=====================================================
  Thing page
  - Shows details of a single thing
  - Has a delete link to remove it
=====================================================#}

{% extends 'pages/base.jinja' %}


{% block title %}

    Exercise Page

{% endblock %}


{% block content %}
    <div class="exercise-page">
        <div class="workout-header">
            <h1>{{exercise.name}}</h1>       
            {% if exercise.user_id != session.user_id %} <h1 class="info-owner">Owner: <strong>{{ exercise.owner }}</strong></h1> {% endif %}
        </div>

        <a role="button" class="fav-button" href="/favourite/{{ exercise.id }}" onclick="return confirm('Are You Sure?');">
            {% if is_favourited %}
                Unfavourite Exercise
            {% else %}
                Favourite Exercise
            {% endif %}</a>

        <h2>Description</h2>
        <div>
            <p>{{exercise.description}}</p>
        </div>
        
        <h2 class="your-workouts">Your Workouts</h2>
        {% if workouts %}
            <table>
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Sets</th>
                        <th>Reps</th>
                        <th>Weight (Kg)</th>
                        <th>Delete</th>
                    </tr>
                </thead>
                <tbody>
                    {% for workout in workouts %}
                    <tr>
                        <td>{{ workout.date }}</td>
                        <td>{{ workout.sets }}</td>
                        <td>{{ workout.reps }}</td>
                        <td>{{ workout.weight }}</td>
                        <td><a href="/delete-workout/{{ workout.id }}" onclick="return confirm('Really delete?');">üóëÔ∏è</a></td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        {% else %}
        <p>You have not logged any workouts for this exercise yet.</p>
        {% endif %}

        
        
                {# Only show delete link if logged in AND owner #}
                {% if session.user_id and exercise.user_id == session.user_id %}
                    <a role="button" class="delete-data-button" href="/delete/{{ exercise.id }}" onclick="return confirm('Really delete?');">Delete Exercise</a>
                {% endif %}

        <a role="button" class="add-data-button" href="/workout-add/{{ exercise.id }}">Add Workout</a>
    </div>
{% endblock %}

